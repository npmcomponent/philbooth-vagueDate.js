(function(e){"use strict";function t(e){var t=n(e.units),a=Date.now(),o=r(e.from,t,a),u=r(e.to,t,a),i=o.timestamp-u.timestamp,s=Math.abs(i);return d(s,o,u)||v(s,i)}function n(e){if(e===void 0)return"ms";if("s"===e||"ms"===e)return e;throw Error("Invalid units")}function r(e,t,n){if(e===void 0)return s(n);if("string"==typeof e&&(e=parseInt(e,10)),a(e)&&u(e))throw Error("Invalid time");return"number"==typeof e&&"s"===t&&(e*=1e3),s(e)}function a(e){return o(e)===!1}function o(e){return"[object Date]"===Object.prototype.toString.call(e)&&isNaN(e.getTime())===!1}function u(e){return i(e)===!1}function i(e){return"number"==typeof e&&isNaN(e)===!1}function s(e){return o(e)?f(e):i(e)?m(e):void 0}function f(e){return c(e.getTime(),e)}function c(e,t){return{timestamp:e,day:t.getDay(),week:y(t),month:t.getMonth(),year:t.getYear()}}function y(e){var t=0,n=new Date(e.getFullYear(),0,1);return n.getDay()>e.getDay()&&(t=1),Math.floor((e.getTime()-n.getTime())/Y.week)+t-1}function m(e){return c(e,new Date(e))}function d(e,t,n){return 0===e?"now":g(e,t,n)||w(e,t,n)||D(e,t,n)||b(t,n)}function g(e,t,n){return h(e,"day",t,n,"today","tomorrow","yesterday")}function h(e,t,n,r,a,o,u){if(2*Y[t]>e){if(n[t]===r[t])return a;if(l(n[t],r[t],I[t]))return o;if(l(r[t],n[t],I[t]))return u}}function l(e,t,n){return e===t-1||e===n-1&&0===t}function w(e,t,n){return k(e,"week",t,n)}function k(e,t,n,r){return h(e,t,n,r,"this "+t,"next "+t,"last "+t)}function D(e,t,n){return k(e,"month",t,n)}function b(e,t){return e.year===t.year?"this year":e.year===t.year+1?"last year":e.year===t.year-1?"next year":void 0}function v(e,t){var n=Math.floor(e/Y.year);return 0>t?"in "+n+" years":n+" years ago"}function p(e){var t=new Date;switch(e){case"now":break;case"today":M(t);break;case"yesterday":t.setDate(t.getDate()-1),M(t);break;case"tomorrow":t.setDate(t.getDate()+1),M(t);break;case"last week":t.setDate(t.getDate()-7),M(t);break;case"next week":t.setDate(t.getDate()+7),M(t);break;case"last month":t.setMonth(t.getMonth()-1),M(t);break;case"next month":t.setMonth(t.getMonth()+1),M(t);break;case"last year":t.setYear(t.getYear()-1),M(t);break;case"next year":t.setYear(t.getYear()+1),M(t);break;case"whenever":t=new Date(0);break;default:throw Error("Invalid vague date")}return t}function M(e){e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(999)}function x(){"function"==typeof define&&define.amd?define(function(){return N}):"object"==typeof module||null!==module?module.exports=N:e.vagueDate=N}var Y={day:864e5,week:6048e5,month:26784e5,year:31536e6},I={day:7,week:52,month:12},N={get:t,set:p};x()})(this);