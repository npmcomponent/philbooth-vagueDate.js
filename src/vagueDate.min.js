(function(){"use strict";function e(e){var n=t(e.units),a=Date.now(),o=r(e.from,n,a),u=r(e.to,n,a),i=o.timestamp-u.timestamp,s=Math.abs(i);return m(s,o,u)||b(s,i)}function t(e){if(e===void 0)return"ms";if("s"===e||"ms"===e)return e;throw Error("Invalid units")}function r(e,t,r){if(e===void 0)return i(r);if("string"==typeof e&&(e=parseInt(e,10)),n(e)&&o(e))throw Error("Invalid time");return"number"==typeof e&&"s"===t&&(e*=1e3),i(e)}function n(e){return a(e)===!1}function a(e){return"[object Date]"===Object.prototype.toString.call(e)&&isNaN(e.getTime())===!1}function o(e){return u(e)===!1}function u(e){return"number"==typeof e&&isNaN(e)===!1}function i(e){return a(e)?s(e):u(e)?y(e):void 0}function s(e){return c(e.getTime(),e)}function c(e,t){return{timestamp:e,day:t.getDay(),week:f(t),month:t.getMonth(),year:t.getYear()}}function f(e){var t=0,r=new Date(e.getFullYear(),0,1);return r.getDay()>e.getDay()&&(t=1),Math.floor((e.getTime()-r.getTime())/M.week)+t-1}function y(e){return c(e,new Date(e))}function m(e,t,r){return 0===e?"now":d(e,t,r)||l(e,t,r)||k(e,t,r)||D(t,r)}function d(e,t,r){return g(e,"day",t,r,"today","tomorrow","yesterday")}function g(e,t,r,n,a,o,u){if(2*M[t]>e){if(r[t]===n[t])return a;if(w(r[t],n[t],x[t]))return o;if(w(n[t],r[t],x[t]))return u}}function w(e,t,r){return e===t-1||e===r-1&&0===t}function l(e,t,r){return h(e,"week",t,r)}function h(e,t,r,n){return g(e,t,r,n,"this "+t,"next "+t,"last "+t)}function k(e,t,r){return h(e,"month",t,r)}function D(e,t){return e.year===t.year?"this year":e.year===t.year+1?"last year":e.year===t.year-1?"next year":void 0}function b(e,t){var r=Math.floor(e/M.year);return 0>t?"in "+r+" years":r+" years ago"}function v(e){var t=new Date;switch(e){case"now":break;case"today":p(t);break;case"yesterday":t.setDate(t.getDate()-1),p(t);break;case"tomorrow":t.setDate(t.getDate()+1),p(t);break;case"last week":t.setDate(t.getDate()-7),p(t);break;case"next week":t.setDate(t.getDate()+7),p(t);break;case"last month":t.setMonth(t.getMonth()-1),p(t);break;case"next month":t.setMonth(t.getMonth()+1),p(t);break;case"last year":t.setYear(t.getYear()-1),p(t);break;case"next year":t.setYear(t.getYear()+1),p(t);break;case"whenever":t=new Date(0);break;default:throw Error("Invalid vague date")}return t}function p(e){e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(999)}var M={day:864e5,week:6048e5,month:26784e5,year:31536e6},x={day:7,week:52,month:12},Y={get:e,set:v};"undefined"==typeof module||null===module?window.vagueDate=Y:module.exports=Y})();